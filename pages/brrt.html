<!doctype html>
<html lang="en">

    <head>

		<!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        
        <title>Data Science Final Exam</title>

        <!-- CSS -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,600">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:300">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.6/css/all.css">
        <link rel="stylesheet" href="static/css/animate.css">
        <link rel="stylesheet" href="static/css/media-queries.css">
        <link rel="stylesheet" href="static/css/style.css">

        <!-- Favicon and touch icons -->


    </head>

    <body>

		<!-- Top menu -->
		<nav class="navbar navbar-dark fixed-top navbar-expand-md navbar-no-bg">
			<div class="container">
			    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			        <span class="navbar-toggler-icon"></span>
			    </button>
			    <div class="collapse navbar-collapse" id="navbarNav">
			        <ul class="navbar-nav ml-auto">
			            <li class="nav-item">
			                <a class="nav-link scroll-link" href="#top-content">Top</a>
			            </li>
			            <li class="nav-item">
			                <a class="nav-link scroll-link" href="#services">Features</a>
			            </li>
			            <li class="nav-item">
			                <a class="nav-link scroll-link" href="#about-us">About</a>
			            </li>
			            <li class="nav-item">
			                <a class="nav-link scroll-link" href="#portfolio">Model</a>
			            </li>
			            <li class="nav-item">
			                <a class="nav-link scroll-link" href="#testimonials">Developers</a>
			            </li>
			            <li class="nav-item">
			                <a class="nav-link scroll-link" href="#banner-area">Assess Now!</a>
			            </li>
			        </ul>
			    </div>
		    </div>
		</nav>

        <!-- Top content -->
        <div class="top-content">
            <div class="container">
            	
                <div class="row">
                    <div class="col-md-8 offset-md-2 text">
                        <h1 class="wow fadeInLeftBig">Data Science Final Requirement</h1>
                        <div class="description wow fadeInLeftBig">
                        	<p>
                         	A system that determines whether an individual is
                            At low risk or high risk in heart disease/s
                        	</p>
                        </div>
                        <div class="top-big-link wow fadeInUp">
                        	<a class="btn btn-primary btn-link-2 scroll-link" href="#services">Features</a>
                        </div>
                    </div>
                </div>
                
            </div>            
        </div>
        
        <!-- Services -->
        <div class="services-container section-container">
	        <div class="container">
	            <div class="row">
	                <div class="col services section-description wow fadeIn">
	                    <h2>Our Features</h2>
	                    <div class="divider-1 wow fadeInUp"><span></span></div>
	                </div>
	            </div>
	            <div class="row">
                	<div class="col-md-4 services-box wow fadeInUp">
                		<div class="row">
	                		<div class="col-md-8">
	                    		<h3>Accurate Prediction</h3>
	                    		<p>A developed system capable of predicting your vulnerability to heart diseases depending on different factors</p>
	                    	</div>
	                    </div>
                    </div>
                    <div class="col-md-4 services-box wow fadeInDown">
	                	<div class="row">
	                		<div class="col-md-8">
	                    		<h3>Easy to Use</h3>
	                    		<p>Users can utilize the system easily for them to know their vulnerability to heart diseases</p>
	                    	</div>
	                    </div>
                    </div>
                    <div class="col-md-4 services-box wow fadeInUp">
	                	<div class="row">
	                		<div class="col-md-8">
	                    		<h3>Based on Research</h3>
	                    		<p>The outcomes of each prediction though not fully accurate, are scientifically based on existing studies and data.</p>
	                    	</div>
	                    </div>
                    </div>
	            </div>
	        </div>
        </div>

        <!-- About us -->
        <div class="about-us-container section-container section-container-gray-bg">
	        <div class="container">
	            <div class="row">
	            	<div class="col-12 col-lg-7 about-us-box wow fadeInLeft">
	                    <div class="about-us-box-text">
	                    	<h3>About the Project</h3>
	                    	<p>
	                    		Because of the current state of the world where access to immediate effective 
	                    		healthcare system is difficult because of the conditions brought upon by the COVID-19 pandemic, 
	                    		the researchers thought that it is of importance that other people know whether they are at high 
	                    		or low risk when it comes to heart diseases so that they can develop a lifestyle or plan that 
	                    		is appropriate enough to overcome such difficulties. Additionally, developing a model that can 
	                    		determine whether an individual is at low or high risk will still be useful 
	                    		long after the pandemic is gone provided that they have undergone previous medical check-ups 
	                    		so that the data required by the system will be sufficiently provided by the patients in order to 
	                    		create a prediction. The researchers, although was able to get an accuracy above 50% threshold, 
	                    		still recommends the patients who will try the system to get proper medical attention and 
	                    		assistance especially if they are experiencing mild to severe conditions attributed to 
	                    		heart problems.
	                    	</p>
	                    </div>
	                </div>
	                <div class="col-12 col-lg-5 about-us-box wow fadeInUp">
	                	<div class="about-us-box-img">
	                    	<img src="static/sample1.jpg" alt="about" data-at2x="static/sample1.jpg">
	                    </div>
	                </div>
	            </div>
	        </div>
        </div>

		<!-- More services -->
        <div class="more-services-container section-container">
	        <div class="container">
	        	
	            <div class="row">
	                <div class="col more-services section-description wow fadeIn">
	                    <h2>How to Use</h2>
	                    <div class="divider-1 wow fadeInUp"><span></span></div>
	                </div>
	            </div>
	            
	            <div class="row">
	                <div class="col-md-6 more-services-box wow fadeInLeft">
	                	<div class="row">
	                		<div class="col-md-3">
	                		
	                		</div>
	                		<div class="col-md-9">
	                			<h3>Entering Information</h3>
		                    	<p>
		                    		Only NUMERICAL values are allowed. For informations regarding anaemia, diabetes, high blood
		                    		pressure, and smoking, a value of 1 means yes while 0 means no.         
		                    	</p>
	                		</div>
	                	</div>
	                </div>
	                <div class="col-md-6 more-services-box wow fadeInLeft">
	                	<div class="row">
	                		<div class="col-md-3">
	                		
	                		</div>
	                		<div class="col-md-9">
	                			<h3>Enter Valid Information</h3>
		                    	<p>
		                    		Double check the information you're entering and make sure that they are valid in order to 
		                    		not acquire invalid and inaccurate results.
		                    	</p>
	                		</div>
	                	</div>
	                </div>
	            </div>
	            
	            <div class="row">
	                <div class="col-md-6 more-services-box wow fadeInLeft">
	                	<div class="row">
	                		<div class="col-md-3">
	                			
	                		</div>
	                		<div class="col-md-9">
	                			<h3>Other Information</h3>
		                    	<p>
		                    		Other information such as Creatinine Phosphokinase, Ejection Fraction, Platelets Count, Serum Creatine
		                    		and Sodium can only be acquired upon having an appointment with a medical expert. Therefore the system
		                    		requires the patient to have a prior appointment first with a doctor before using the system.
		                    	</p>
	                		</div>
	                	</div>
	                </div>
	                <div class="col-md-6 more-services-box wow fadeInLeft">
	                	<div class="row">
	                		<div class="col-md-3">
	                			
	                		</div>
	                		<div class="col-md-9">
	                			<h3>Accuracy</h3>
		                    	<p>
		                    		Although the researchers were able to get an accuracy score of 68% for prediction results, always
		                    		take this with caution and consult immediately with an expert once signs of heart diseases persist.
		                    	</p>
	                		</div>
	                	</div>
	                </div>
	            </div>

	        </div>
        </div>
        
        <!-- Portfolio -->
        <div class="portfolio-container section-container">
	        <div class="container">
	            <div class="row">
	                <div class="col portfolio section-description wow fadeIn">
	                    <h2>Our Model</h2>
	                    <div class="divider-1 wow fadeInUp"><span></span></div>
	                    <p>Here's Our Code for Our Model</p>
	                </div>
	            </div>
	            
                		<p> import numpy</p>
                        <p> import pygad</p>
                        <p> import pygad.nn</p>
                        <p> import pygad.gann</p>
                        <p> import pandas as pd</p>
                        <p> import pickle</p>
                        <p> from sklearn.preprocessing import LabelEncoder</p>
                        <p> from sklearn.model_selection import train_test_split</p>
                            
                        <p> df = pd.read_csv('heart_failure_clinical_records_dataset.csv')</p>
                            
                             
                        <p> #Splitting the data set
                        <p> data_input = df.loc[:,df.columns!='DEATH_EVENT']</p>
                        <p> data_output = df.iloc[:,-1]</p>
                            
                        <p> #converting to numpy array
                        <p> data_inputs = data_input.to_numpy()</p>
                        <p> data_outputs = data_output.to_numpy()</p>
                            
                        <p> class ModelAnn:</p>
                            
                            <p> def fitness_func(solution, sol_idx):</p>
                                <p> global GANN_instance, data_inputs, data_outputs</p>
                                    
                                <p> predictions = pygad.nn.predict(last_layer=GANN_instance.population_networks[sol_idx],
                                                                   data_inputs=data_inputs)</p>
                                    
                                <p> correct_predictions = numpy.where(predictions == data_outputs)[0].size</p>
                                <p> solution_fitness = (correct_predictions/data_outputs.size)*100</p>
                                    
                                <p> return solution_fitness</p>
                                
                                <p> def callback_generation(ga_instance):</p>
                                <p> global GANN_instance</p>
                                    
                                <p> population_matrices = pygad.gann.population_as_matrices(population_networks=GANN_instance.population_networks, 
                                                                                            population_vectors=ga_instance.population)</p>
                                    
                                <p> GANN_instance.update_population_trained_weights(population_trained_weights=population_matrices)</p>
                                    
                                <p> print("Generation = {generation}".format(generation=ga_instance.generations_completed))</p>
                                <p> print("Accuracy   = {fitness}".format(fitness=ga_instance.best_solution()[1]))</p>
                                
                                <p> def predict(inputs, solution_idx):</p>
                                    <p> prediction = pygad.nn.predict(last_layer=GANN_instance.population_networks[solution_idx],
                                                           data_inputs=inputs)</p>
                                     <p> return prediction</p>
                            
                             <p> GANN_instance = pygad.gann.GANN(num_solutions=10,
                                                            num_neurons_input=12,
                                                            num_neurons_hidden_layers=[2],
                                                            num_neurons_output=4,
                                                            hidden_activations=["relu"],
                                                            output_activation="softmax")</p>
                            
                             <p> population_vectors = pygad.gann.population_as_vectors(population_networks=GANN_instance.population_networks)</p>
                            
                             <p> ga_instance = pygad.GA(num_generations=50, 
                                                   num_parents_mating=4, 
                                                   initial_population=population_vectors.copy(),
                                                   fitness_func=ModelAnn.fitness_func,
                                                   mutation_percent_genes=7,
                                                   callback_generation=ModelAnn.callback_generation)</p>
                            
                             <p> ga_instance.run()</p>
                            
                            
                             <p> ga_instance.plot_result()</p>
                            
                             <p> global solution_idx </p>
                             <p> solution, solution_fitness, solution_idx = ga_instance.best_solution()</p>
                            
                             <p> elast_layer = GANN_instance.population_networks[solution_idx]</p>
                            
                             <p> print(solution)</p>
                             <p> print(solution_fitness)</p>
                             <p> print(solution_idx)</p>
                            
                             <p>pickle.dump(elast_layer, open('GA.pkl', 'wb'))</p>

	            </div>
	        </div>
        </div>
        
        <!-- Testimonials -->
        <div class="testimonials-container section-container section-container-image-bg">
        	<div class="container">
        		<div class="row">
        			<div class="col testimonials section-description wow fadeIn"></div>
        		</div>
        		<div class="row">
        			<div class="col-md-10 offset-md-1 testimonial-list wow fadeInUp">
        				
        				<div class="tab-content" id="myTabContent">
        					<div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
        						<div class="testimonial-image">
                					<img src="static/tags.jpg" alt="testimonial-1" data-at2x="static/tags.jpg">
                				</div>
                				<h2>TAGUIAM, John Angelo</h2>
                				<div class="testimonial-text">
	                                <p>
	                                	Hello, My name is John Angelo M. Taguiam. I am 22 years old, My dream is to be a 
	                                	successful man in the future and give back something to my parents. Some of 
	                                	my hobbies are playing online games and reading books/manga and be curious to 
	                                	everything.<br>
	                                </p>
                                </div>
        					</div>
        					<div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
        						<div class="testimonial-image">
                					<img src="static/rence.jpg" alt="testimonial-2" data-at2x="static/rence.jpg">
                				</div>
                                <h2>SANTOS, John Laurence</h2>	
                				<div class="testimonial-text">
	                                <p>
	                                	Hello, I am John Laurence Santos, 20 years old and an aspiring programmer. 
	                                	I spend a lot of my free time playing video games and watching different anime
	                                	and TV series. When it comes to working with others, I always try my best to
	                                	work with them despite our differences.<br>
	                                </p>
                                </div>
        					</div>
        					<div class="tab-pane fade" id="tab3" role="tabpanel" aria-labelledby="tab3-tab">
        						<div class="testimonial-image">
                					<img src="static/img/testimonials/3.jpg" alt="testimonial-3" data-at2x="static/img/testimonials/3.jpg">
                				</div>
                				<div class="testimonial-text">
	                                <p>
	                                	"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et. 
	                                	Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et. 
	                                	Lorem ipsum dolor sit amet."<br>
	                                	<a href="#">Lorem Ipsum, dolor.co.uk</a>
	                                </p>
                                </div>
							</div>
        					<div class="tab-pane fade" id="tab4" role="tabpanel" aria-labelledby="tab4-tab">
        						<div class="testimonial-image">
                					<img src="static/img/testimonials/4.jpg" alt="" data-at2x="static/img/testimonials/4.jpg">
                				</div>
                				<div class="testimonial-text">
	                                <p>
	                                	"Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip 
	                                	ex ea commodo consequat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit 
	                                	lobortis nisl ut aliquip."<br>
	                                	<a href="#">Minim Veniam, nostrud.com</a>
	                                </p>
                                </div>
        					</div>
        				</div>
        				
        				<ul class="nav nav-tabs" id="myTab" role="tablist">
        					<li class="nav-item">
        						<a class="nav-link active" id="tab1-tab" data-toggle="tab" href="#tab1" role="tab" aria-controls="tab1" aria-selected="true"></a>
        					</li>
        					<li class="nav-item">
        						<a class="nav-link" id="tab2-tab" data-toggle="tab" href="#tab2" role="tab" aria-controls="tab2" aria-selected="false"></a>
        					</li>
        				</ul>
        				
        			</div>
        		</div>
        	</div>
        </div>
                

        
                <!-- Prediction -->
	       <div class = "banner-area">
				<h2>HEART RISK PREDICTION</h2>
                   <form action="{{ url_for('main') }}" method="POST">
    <fieldset>
        <legend>Input values for Assessment:</legend>
        <br><div class = "form-group">    Age:
        <input name="age" required>
        </div>
        <br><div class = "form-group">    Anaemia:
        <input name="anaemia" required>
        </div>
        <br><div class = "form-group">    Diabetes:
        <input name="diabetes" required>
        </div>
        <br><div class = "form-group">    High Blood Pressure:
        <input name="high_blood_pressure" required>
        </div>
        <br><div class = "form-group">    Sex:
        <input name="sex" required>
        </div>
        <br><div class = "form-group">    Smoking:
        <input name="smoking" required>
        </div>
        <br><div class = "form-group">    Creatinine Phosphokinase:
        <input name="creatinine_phosphokinase" required>
        </div>
        <br><div class = "form-group">    Ejection Fraction:
        <input name="ejection_fraction" required>
        </div> 
        <br><div class = "form-group">    Platelets:
        <input name="platelets" required>
        </div>
        <br><div class = "form-group">    Serum Creatinine:
        <input name="serum_creatinine" required>
        </div>
        <br><div class = "form-group">    Serum Sodium:
        <input name="serum_sodium" required>
        </div>
        <br>        
         <input type="submit">
    </fieldset>
</form>
<br>
<div class="result" align="center">
   {{result}}
</div>


        <!-- Javascript -->
        <script src="static/js/jquery-3.2.1.min.js"></script>
        <script src="static/js/jquery-migrate-3.0.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="static/js/jquery.backstretch.min.js"></script>
        <script src="static/js/wow.min.js"></script>
        <script src="static/js/retina-1.1.0.min.js"></script>
        <script src="static/js/waypoints.min.js"></script>
        <script src="static/js/scripts.js"></script>

    </body>

</html>